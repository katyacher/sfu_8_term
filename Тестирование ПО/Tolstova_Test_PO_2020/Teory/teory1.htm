<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Заголовок 1 Знак";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;}
h2
	{mso-style-link:"Заголовок 2 Знак";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
h3
	{mso-style-link:"Заголовок 3 Знак";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
h4
	{mso-style-link:"Заголовок 4 Знак";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-style:italic;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Верхний колонтитул Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Нижний колонтитул Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
code
	{font-family:"Courier New";}
pre
	{mso-style-link:"Стандартный HTML Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Текст выноски Знак";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.1
	{mso-style-name:"Заголовок 1 Знак";
	mso-style-link:"Заголовок 1";
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.a
	{mso-style-name:"Текст выноски Знак";
	mso-style-link:"Текст выноски";
	font-family:"Tahoma","sans-serif";}
span.2
	{mso-style-name:"Заголовок 2 Знак";
	mso-style-link:"Заголовок 2";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.3
	{mso-style-name:"Заголовок 3 Знак";
	mso-style-link:"Заголовок 3";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.a0
	{mso-style-name:"Верхний колонтитул Знак";
	mso-style-link:"Верхний колонтитул";}
span.a1
	{mso-style-name:"Нижний колонтитул Знак";
	mso-style-link:"Нижний колонтитул";}
span.4
	{mso-style-name:"Заголовок 4 Знак";
	mso-style-link:"Заголовок 4";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.HTML
	{mso-style-name:"Стандартный HTML Знак";
	mso-style-link:"Стандартный HTML";
	font-family:"Courier New";}
span.keyword
	{mso-style-name:keyword;}
span.string
	{mso-style-name:string;}
span.number
	{mso-style-name:number;}
span.comment
	{mso-style-name:comment;}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:2.0cm 42.5pt 2.0cm 3.0cm;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=RU link=blue vlink=purple>

<div class=WordSection1>

<h1 align=center style='text-align:center'><span style='font-size:18.0pt;
line-height:115%;font-family:"Times New Roman","serif"'>Рефакторинг</span></h1>

<h2>Что такое рефакторинг?</h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Рефакторинг представляет собой процесс
такого изменения программной  системы, при котором не меняется внешнее
поведение кода, но улучшается его  внутренняя структура. Это способ
систематического приведения кода в порядок, при котором шансы появления новых
ошибок минимальны. В сущности, при проведении рефакторинга кода улучшается
дизайн кода после его написания.</span></p>

<h2><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Зачем
нужно проводить рефакторинг?</span></h2>

<h3><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Рефакторинг
улучшает композицию программного обеспечения</span></h3>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Без
рефакторинга композиция программы приходит в негодность. По мере внесения в код
изменений, связанных с реализацией краткосрочных целей или производимых без
полного  понимания организации кода, последний утрачивает свою
структурированность. Разобраться в проекте, читая код, становится все труднее.
Рефакторинг напоминает наведение порядка в коде. Убираются фрагменты,
оказавшиеся не на своем месте. Утрата  кодом  структурности  носит 
кумулятивный  характер.  Чем  сложнее  разобраться  во  внутреннем устройстве
кода, тем труднее его сохранить и тем быстрее происходит его распад. Регулярно
проводимый рефакторинг помогает сохранять форму кода.</span></p>

<h3><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Рефакторинг
облегчает понимание программного обеспечения</span></h3>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Понимание
работы программного обеспечения один из навыков любого программиста, так как
умение понимать код позволяет быстрее и качественнее с ним работать. Также за
частую требуется работать с кодом, который был написан ранее другим
программистом. А разбор неизвестного кода может занять довольно большое
количество времени, что может отрицательно сказываться как на работе самого
программиста, так и на работе всего предприятия. Рефакторинг помогает сделать
код более легким для чтения. При проведении рефакторинга можно добиться того,
что код станет лучше информировать о своей цели.</span></p>

<h3><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Рефакторинг
помогает найти ошибки</span></h3>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Лучшее
понимание кода помогает выявить ошибки. При проведении рефакторинга приходиться
читать код, понимать суть его поведения. При детальном изучении кода можно
увидеть ошибки допущенный при его написании. Рефакторинг помогает в написании
более надежного кода.</span></p>

<h2>Когда следует проводить рефакторинг?</h2>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Рефакторинг
должен проводиться по возможности как можно чаще, так как он влияет на качество
написанного кода и в целом работоспособности программного обеспечения, но не
стоит делать его постоянно. Далее представлены наиболее частые ситуации, когда
стоит применять рефакторинг.</span></p>

<h3><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Применяйте
рефакторинг при добавлении новой функции</span></h3>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Проведение
рефакторинга при добавлении новой функции позволяет довольно ускорить процесс
разработки, за счет получения более полной информации о работе программы, а
также позволяет понять на сколько возможно добавление новой функции в уже
существующий код без внесения в него существенных изменений.</span></p>

<h3><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Применяйте
рефакторинг, если требуется исправить ошибку</span></h3>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>При
исправлении ошибок польза рефакторинга во многом заключается в том, что код
становится более понятным. В процессе рефакторинга изучается структура и
поведение программы. За счет этого можно узнать, где находится ошибка в коде.</span></p>

<h3><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Применяйте
рефакторинг при разборе кода</span></h3>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Благодаря
разбору  кода  знания  становятся  достоянием  всей  команды  разработчиков. Разборы
помогают большему числу людей разобраться с большим числом аспектов крупной
программной системы.</span></p>

<h3><span style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Проблемы,
возникающие при проведении рефакторинга</span></h3>

<h2>Когда рефакторинг не нужен</h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>В некоторых случаях рефакторинг вообще
не нужен. Основной пример - необходимость переписать программу с нуля. Иногда
имеющийся код настолько запутан, что подвергнуть его рефакторингу, конечно,
можно, но проще начать все с самого начала. Явный признак необходимости
переписать код - его неработоспособность. Это обнаруживается только при его
тестировании, когда ошибок оказывается так много, что сделать код устойчивым не
удается.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Другой случай, когда следует
воздерживаться от рефакторинга, это близость даты завершения проекта. Рост
производительности, достигаемый благодаря рефакторингу, проявит себя слишком
поздно – после истечения срока. Зачастую проведение рефакторинга приводит к
росту производительности труда. Нехватка времени обычно сигнализирует о
необходимости рефакторинга.</span></p>

<h2>Рефакторинг и проектирование</h2>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Рефакторинг
играет особую роль в качестве дополнения к проектированию. Если заранее
подумать об архитектуре программы, то можно избежать последующей дорогостоящей
переработки.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>При
проведении проектирования, лучше сделать акцент на проведение рефакторинга, так
как данный способ разработки программного обеспечения позволяет отказаться от
создания сложных структур обладающих гибкостью. Так как гибкость достигается за
счет проведения рефакторинга, что упрощает не только процесс разработки, но и
последующее обслуживание и модификацию программы.</span></p>

<p class=MsoNormal style='text-align:justify;text-indent:35.4pt'><span
style='font-size:14.0pt;line-height:115%;font-family:"Times New Roman","serif"'>Рефакторинг
позволяет создавать более простые проекты, не жертвуя гибкостью, благодаря чему
процесс проектирования становится более легким и менее трудозатратным.</span></p>

<h2>Основные проблемы с которыми борется рефакториг</h2>

<h3>Дублирование кода</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Простейшая задача с дублированием кода
возникает, когда одно и то же выражение присутствует в двух методах одного и
того же класса или в двух разных классах. В этом случае надо лишь выделить
новый метод или класс и вызвать его из предшествующих двух точек.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><img width=298 height=314
id="Рисунок 14" src="teory1.files/image001.png"><img width=266 height=347
id="Рисунок 15" src="teory1.files/image002.png"></p>

<h3>Длинный метод и большой класс</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Использование длинных методов ведет к
тому, что возникает сложность в последующем изучении его работы. Использование
декомпозиции методов позволяет упростить понимание кода за счет разбиения его
на функциональные составляющие. При использовании декомпозиции стоит отметить
то, что правильное задание имен методов тоже имеет существенный вес в понимании
кода.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Большая длинна класса как и большая
длина метода является отрицательным фактором в работе программы, так как в
большом количестве строк весьма трудно находить ошибки, но довольно легко
создавать их. При работе с большим классом стоит отметить, что класс можно
разбить на несколько классов в зависимости от методов, которые они будут
содержать, а также от атрибутов, которые будут в них передаваться.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><img width=292 height=411
id="Рисунок 3" src="teory1.files/image003.png"><img width=485 height=520
id="Рисунок 20" src="teory1.files/image004.png"></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>&nbsp;</span></p>

<h3>Длинный список параметров</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Суть данной проблемы в коде является
передача большого количества параметров для каждого метода, в которых трудно
разбираться, они в последствие становятся противоречивыми и сложными в
использовании, а также их приходится постоянно изменять по мере того, как
возникает необходимость в новых данных. Если передавать объекты, то изменений
требуется мало, потому что для получения новых данных можно использовать
несколько запросов.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Также можно получить данные в одном
параметре путем вызова метода объекта, который уже известен. Этот объект может
быть полем или другим параметром. </span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Есть важное исключение, когда такие
изменения не нужны. Оно касается ситуации, когда нет причины создавать
зависимость между вызываемым и более крупным объектами. В таких случаях разумно
распаковать данные и передать их как параметры. Если список параметров
оказывается слишком длинным или модификации слишком частыми, следует
пересмотреть структуру зависимостей.</span></p>

<h3>Расходящиеся модификации</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Расходящиеся модификации имеют место
тогда, когда один класс часто модифицируется различными способами по разным
причинам. Например в случае, когда при добавлении базы данных меняется часть
методов, а при появлении нового функционала остальные методы, то стоит иметь на
такой случай два класса. Благодаря этому каждый класс будет иметь свою четкую
зону ответственности и изменяться в соответствии с изменениями в этой зоне.</span></p>

<h3>«Стрельба дробью»</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>«Стрельба дробью» - это одно изменение,
затрагивающее много классов. В обоих случаях желательно сделать так, чтобы в
идеале между частыми изменениями и классами было взаимно однозначное отношение.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>В такой ситуации следует по возможности
перенести все изменяющиеся поля и методы в один класс уже существующий, или
создать новый в зависимости от ситуации, чтобы внести изменения во все части
кода, которые необходимо изменить.</span></p>

<h3>Завистливые функции</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Суть данной проблемы в том, что метод
может работать с данными из другого класса, а класс, в котором он находится не
задействован в методе. В данном случае лучше всего перенести метод в другой
класс. Также как один из вариантов может послужить декомпозиция метода и размещение
новых методов в разных местах кода.</span></p>

<h3>Группы данных</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Иногда данные могут быть объединены в
группы по несколько элементов или встречаться в разных местах, например в поля
в нескольких классах или в сигнатурах методов. В данном случае стоит выделить
данные группы данных в отдельный класс. В результате сразу удается укоротить
многие списки параметров и упростить вызов методов.</span></p>

<h3>Одержимость элементарными типами</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>В данном случае речь идет о том, что при
выполнении небольших функций не используются объекты, а используются
переменные. В данном случае лучше всего объединять данные в классы или  под
классы, это обеспечит надежность при работе с данными, за счет определения их
структуры и централизованного местоположения.</span></p>

<h3>Операторы типа switch</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Одним из очевидных признаков
объектно-ориентированного кода служит сравнительная немногочисленность операторов
типа switch. Проблема, обусловленная применением  switch, по существу, связана
с дублированием. Часто один и тот же блок switch оказывается разбросанным по
разным местам программы. При добавлении в переключатель нового варианта
приходится искать все эти блоки Switch и модифицировать их. </span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Как правило, заметив блок switch,
следует определить, где должен происходить полиморфизм. Часто переключатель
работает в зависимости от кода типа. Необходим метод или класс, хранящий
значение кода типа. Поэтому воспользуйтесь выделением метода для выделения
переключателя, а затем перемещением метода для вставки его в тот класс, где
требуется полиморфизм.</span></p>

<h3>Ленивый класс</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Данная проблема возникает если класс
стал не нужен, или не эффективен, или не выполняет свои функции в следствие
рефакторинга или модификаций кода. В данном случае остается только
ликвидировать данный класс, но стоит помнить, что функционал, который он должен
выполнять, должен выполняться в других классах.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;line-height:normal'><img width=354 height=264 id="Рисунок 18"
src="teory1.files/image005.png"><img width=233 height=169 id="Рисунок 19"
src="teory1.files/image006.png"></p>

<h3>Теоретическая общность</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Данная проблема получается в процессе
написания кода с частичным функционалом, который будет использоваться в
будущем, но не использующийся в настоящем. Такой подход дает определенное
преимущество в дальнейшей разработке за счет превентируемой гибкости, но при
этом возникает проблема на стадии поддержки и модификации кода, так как трудно
понять поведение кода, который не используется.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>У методов с параметрами, которые не используются,
стоит удалить данные параметры. Методы с именами, которые не несут смысловой
нагрузки в названии стоит переименовать.</span></p>

<h3>Временное поле</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Иногда обнаруживается, что в некотором
объекте атрибут устанавливается только при определенных обстоятельствах. Такой
код труден для понимания, поскольку естественно ожидать, что объекту нужны все
его переменные. Можно сломать голову, пытаясь понять, для чего существует
некоторая переменная, когда не удается найти, где она используется.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>В качестве варианта решения проблемы
можно вынести все переменные в отдельный класс вместе с кодом, который работает
с ними.</span></p>

<h3>Цепочки сообщений</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Цепочки сообщений появляются, когда
клиент запрашивает у одного объекта другой, у которого клиент запрашивает еще
один объект, у которого клиент запрашивает еще один объект и т. д. Это может
выглядеть как длинный ряд методов или последовательность временных переменных.
Такие последовательности вызовов означают, что клиент связан с навигацией по
структуре классов. Любые изменения промежуточных связей означают необходимость
модификации клиента.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Обычно лучше посмотреть, для чего
используется конечный объект. Попробуйте с помощью выделения метода взять
использующий его фрагмент кода и путем перемещения метода передвинуть его вниз
по цепочке. Если несколько клиентов одного из объектов цепочки желают пройти
остальную часть пути, добавьте метод, позволяющий это сделать.</span></p>

<h3>Посредник</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Одной из главных характеристик объектов
является инкапсуляция - сокрытие внутренних деталей от внешнего мира.
Инкапсуляции часто сопутствует делегирование. Иногда возникает ситуация, когда
довольно большое количество методов делегирует обработку другому классу. В
данном случае стоит избавиться от посредника и перенести некоторые методы в
вызывающий класс.  Также в некоторых случая можно заменять делегирование
наследованием.</span></p>

<h3>Неуместная близость</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Иногда классы оказываются в слишком
близких отношениях и чаще, чем следовало бы, погружены в закрытые части друг
друга. Данные классы стоит разделить, для этого стоит применить перемещения
методов и полей. Также общую часть можно выделить в отдельный класс.</span></p>

<h3>Альтернативные классы с разными интерфейсами</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Для решения данной задачи возможно
переименование методов, выполняющих одинаковые действия, но различающимся
сигнатурами. Возможно применение выделение и перемещение метода, а при
избыточном перемещении кода возможно применение выделение родительского класса.</span></p>

<h3>Неполнота библиотечного класса</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Проблема в том, что обычно оказывается невозможным
модифицировать библиотечный класс, чтобы он выполнял какие-то желательные
действия.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Для этой работы у нас есть пара
специализированных инструментов. Если в библиотечный класс надо включить всего
лишь один-два новых метода, можно выбрать введение внешнего метода.</span></p>

<h3>Классы данных</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Такие классы содержат поля, методы для
получения и установки значений этих полей и ничего больше. Такие классы - бессловесные
хранилища данных, которыми манипулируют другие классы.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>На ранних этапах в этих классах могут
быть открытые поля, и тогда необходимо закрыть эти поля, а при наличии
коллекций закрыть и их.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Посмотрите, как эти методы доступа к
полям используются другими классами, в данном случае стоит переместить методы
доступа в класс данных.</span></p>

<h3>Отказ от наследства</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Подклассам полагается наследовать методы
и данные своих родителей. Но не все методы и данные, которые наследуются,
используются в дочерних классах. В данном случае стоит изменить код таким
образом, чтобы родительский класс содержал по возможности только общие для всех
подклассов данные и методы.</span></p>

<h3>Комментарии</h3>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Комментарии довольно неплохой способ
указать на структуру и функции выполняемые в коде, но не редко они могут носить
противоречивый характер после изменения кода. Комментарии, несомненно, необходимы
для большого количества кода, но они должны быть использованы обоснованно.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;text-indent:35.4pt;line-height:normal'><span style='font-size:14.0pt;
font-family:"Times New Roman","serif"'>Если для объяснения действий блока
требуется комментарий, то возможно стоит заменить комментарий на переименование
класса, метода, констант и переменных. Также можно в коде выделять методы,
которые будут понятны без комментария.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;text-align:
justify;line-height:normal'><img width=297 height=251 id="Рисунок 16"
src="teory1.files/image007.jpg"><img width=294 height=234 id="Рисунок 17"
src="teory1.files/image008.jpg"></p>

<span style='font-size:11.0pt;line-height:115%;font-family:"Calibri","sans-serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal>&nbsp;</p>

<h4>Методы рефакторинга</h4>

<p class=MsoNormal style='margin-left:35.45pt;text-indent:-18.0pt;line-height:
normal'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>Выделение метода </b>(<i>преобразуйте фрагмент кода в метод, название
которого объясняет его значение</i>).<br>
Длинный метод разбиваем на логические под-методы.<br>
<img width=395 height=436 id="Рисунок 1" src="teory1.files/image009.jpg"></p>

<ol start=2 type=1>
 <li class=MsoNormal style='line-height:normal'><b>Встраивание метода</b> (<i>поместите
     тело метода в код, который его вызывает и удалите метод</i>).<br>
     Излишняя косвенность (разбивка на методы) может усложнить класс.<br>
     <img width=416 height=352 id="Рисунок 2" src="teory1.files/image010.png"></li>
 <li class=MsoNormal style='line-height:normal'><b>Встраивание временной
     переменной</b> (<i>замените этим выражением, все ссылки на данную
     переменную</i>).<br>
     Лишний промежуточный код.<br>
     <img width=244 height=155 id="Рисунок 4" src="teory1.files/image011.png"></li>
 <li class=MsoNormal style='line-height:normal'><b>Замена временной переменной
     вызовом метода</b> (<i>преобразуйте выражение в метод</i>).<br>
     Метод может вызываться в любом месте класса, если таких мест много.<br>
     <img width=259 height=362 id="Рисунок 5" src="teory1.files/image012.jpg"><img
     width=275 height=372 id="Рисунок 6" src="teory1.files/image013.jpg"></li>
 <li class=MsoNormal style='line-height:normal'><b>Введение поясняющей
     переменной</b> (<i>поместите результат выражения или его части во
     временную переменную</i>).<br>
     Упрощается чтение и понимание кода.<br>
     <br>
 </li>
</ol>

<p class=MsoNormal align=center style='text-align:center;line-height:normal'><img
width=643 height=276 id="Рисунок 7" src="teory1.files/image014.jpg"></p>

<ol start=6 type=1>
 <li class=MsoNormal style='line-height:normal'><b>Расщепление поясняющей
     переменной</b> (<i>создайте для каждого присвоения отдельную временную
     переменную</i>).<br>
     Упрощается чтение и понимание кода.<br>
     <img width=298 height=266 id="Рисунок 8" src="teory1.files/image015.png"></li>
 <li class=MsoNormal style='line-height:normal'><b>Удаление присвоений
     параметрам</b> (<i>лучше воспользоваться временной переменной</i>).<br>
     Методы не должны менять значения входящих параметров, если это явно не
     указано (например out, ref в C#).<br>
     <img width=425 height=420 id="Рисунок 9" src="teory1.files/image016.jpg"></li>
 <li class=MsoNormal style='line-height:normal'><b>Замена метода объектом
     методов</b> (<i>преобразуйте метод в отдельный объект</i>).<br>
     Декомпозиция класса для гибкости кода.<br>
     <img width=310 height=285 id="Рисунок 10" src="teory1.files/image017.jpg"><span
     lang=EN-US><br>
     </span><img width=464 height=495 id="Рисунок 11"
     src="teory1.files/image018.jpg"></li>
 <li class=MsoNormal style='line-height:normal'><b>Замещение алгоритма</b> (<i>замените
     алгоритм на более понятный</i>).<br>
     Оптимизация кода для лучшей читаемости и/или производительности.<br>
     <img width=269 height=419 id="Рисунок 12" src="teory1.files/image019.jpg"><br>
     <img width=393 height=255 id="Рисунок 13" src="teory1.files/image020.jpg"></li>
</ol>

</div>

</body>

</html>
